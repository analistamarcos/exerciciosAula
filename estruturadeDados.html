<!DOCTYPE html>
<html>
    <head>
        <title>Projeto Livraria</title>
        <meta charset="utf-8" />
         <!-- Latest compiled and minified CSS -->
         <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
     </head>
     <body  class="container">
        <h1>Estrutura de Dados</h1>
        <div>
            <h2>Função recursiva</h2>
            <div id="recursiva"></div><!--Vou inserir aqui o javaScript quando chamar o id-->
            <h2>Recursiva consumindo Array</h2>
            <div id="lerArray"></div><!--Vou inserir aqui o javaScript quando chamar o id-->   
        </div>

        <h2>Filas</h2>
            <div class="mb-5 mt-5">
                <p>Pŕoximo Cliente</p>
                <p id="next"></p>
                <p>Usuários Atendidos</p>
                <ul id="result"></ul>
                <p>Usuários aguardando suporte</p>
                <ul id="users"></ul>
                <button id="btAtende" class="btn btn-info">Atendimento Concluído</button>
                <button id="darBaixa" class="btn btn-info">Dar Baixa</button>
            </div>

    </body>
     <script>
         let n=20 // A função recursiva chama ela mesma!! é uma simulação do while e do for
         let paises=["Brasil","França","Alemanha","Argentina"]//Vou trabalhar com duas funções
         let x=0

         function recursiva_array(obj){
             if(x < paises.length){                
                 obj.innerHTML+=paises[x] + "<br />"
                 x++    
                 recursiva_array(document.querySelector("#lerArray"))
             }         
         }
         //1a chamada
         recursiva_array(document.querySelector("#lerArray"))
         console.log(paises[3])
        
         function recursiva(obj){//usou o objeto na função recursiva
             if(n >1){  // se eu quiser que diminua do 20 até 0 coloco o decrementador para baixo e mudo aqui ra 0              
                 n = n -1 
                 //return n
                 obj.innerHTML+=n + "<br />" //n-- coloco decrementar aqui para contar de 20
                 //n--
                 recursiva(document.querySelector("#recursiva"))//a função está chamando ela mesma até acabar  o 20
             }         
         }
         //1a chamada
        recursiva(document.querySelector("#recursiva"))// aqui faz a primeira chamada
       // document.querySelector("#recursiva").innerHTML+=recursiva() + "<br />"


//FILAS = QUEUES (FIFO = First in, First Out)

let fila = []
let usuariosAtendidos=[]
fila.push(25)
fila.push(34)
fila.push(9)
//fila criada
console.log(fila)
console.log(fila[0])
usuariosAtendidos.push(fila[0])//antes de remover o usuário atendido, coloquei dentro dessa variável

 //chamada DA EXECUÇÃO
fila.shift()
console.log("Array após a primeira chamada",fila)

console.log(fila[0])
usuariosAtendidos.push(fila[0])
fila.shift()
console.log("Array após a segunda chamada",fila)
console.log("Usuários Atendidos",usuariosAtendidos)


//next=próximo user , users=lista de pendência,
//result=lista de atendidos,btAtende=botão de confirmação

let listaUsers=["Alan","Debora","Francis","Georgia","Osmar"]
let listaResult=[]

function users(){// Antes do laço eu zero o atendimento
    document.querySelector("#users").innerHTML="" // innerHTML VAZIO zera informações lista usuario
    for(var i=0;i<listaUsers.length;i++){// preenche o que encontrar +=
        document.querySelector("#users").innerHTML+="<li>" + listaUsers[i] + "</li>"
    }
    listaUsers.length > 0 ? document.querySelector("#next").innerHTML=listaUsers[0] : null// mostra o próximo a ser atendido
}//lê e recupera o primeiro elemento

users()

document.querySelector("#btAtende").onclick=function(){ darBaixa() }

function darBaixa(){
    if(listaUsers.length >0){
   listaResult.push(listaUsers[0]) //retirar da lista quem foi atendido
   document.querySelector("#result").innerHTML=""
   for(var i=0;i<listaResult.length;i++){
        document.querySelector("#result").innerHTML+="<li>" + listaResult[i] + "</li>"
    }
   listaUsers.shift()
   users()
    } else {
        document.querySelector("#next").innerHTML="<b>Todos os clientes foram atendidos</b>" 
    }
}

let intervaloBaixa
document.querySelector("#darBaixa").onclick=function(){
intervaloBaixa=setInterval(function(){
    darBaixa()},2000)
}
//para encerrar o intervalo use clearInterval(intervaloBaixa)


     </script>
</html>